<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Cookie | Azi Studio</title><meta name="description" content="">
    <link rel="modulepreload" href="assets/app.47e28445.js"><link rel="modulepreload" href="assets/index.html.18881a38.js"><link rel="modulepreload" href="assets/index.html.f9e5251a.js"><link rel="prefetch" href="assets/index.html.b9a71933.js"><link rel="prefetch" href="assets/404.html.265028f6.js"><link rel="prefetch" href="assets/index.html.4e58fa9b.js"><link rel="prefetch" href="assets/404.html.17f3a20c.js"><link rel="prefetch" href="assets/404.b31e9cf5.js"><link rel="prefetch" href="assets/Layout.beaf74ac.js">
    <link rel="stylesheet" href="assets/style.a781a21f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Azi Studio</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Cookie <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/tech/cookie/#有效期-expires-max-age" class="router-link-active router-link-exact-active sidebar-item" aria-label="有效期  Expires/Max-Age"><!--[--><!--]--> 有效期  Expires/Max-Age <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tech/cookie/#作用域-domain-path" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域 Domain/Path"><!--[--><!--]--> 作用域 Domain/Path <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/tech/cookie/#domain" class="router-link-active router-link-exact-active sidebar-item" aria-label="Domain"><!--[--><!--]--> Domain <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tech/cookie/#path" class="router-link-active router-link-exact-active sidebar-item" aria-label="Path"><!--[--><!--]--> Path <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/tech/cookie/#samesite" class="router-link-active router-link-exact-active sidebar-item" aria-label="SameSite"><!--[--><!--]--> SameSite <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tech/cookie/#限制访问-secure-httponly" class="router-link-active router-link-exact-active sidebar-item" aria-label="限制访问 Secure/HttpOnly"><!--[--><!--]--> 限制访问 Secure/HttpOnly <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/tech/cookie/#secure" class="router-link-active router-link-exact-active sidebar-item" aria-label="Secure"><!--[--><!--]--> Secure <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tech/cookie/#httponly" class="router-link-active router-link-exact-active sidebar-item" aria-label="HttpOnly"><!--[--><!--]--> HttpOnly <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h1><p>Category: Broswer Priority: ⭐️⭐️⭐️⭐️⭐️ Property: April 17, 2022 6:49 PM Status: 已完成</p><h1 id="历史" tabindex="-1"><a class="header-anchor" href="#历史" aria-hidden="true">#</a> 历史</h1><p>由网景公司1993发明，是网站为了辨别用户身份而存储在终端的一段数据。</p><p>由于 HTTP 协议是无状态的，导致Web应用的交互能力很差，Cookie 就是用来解决 HTTP 无状态性的重要手段。</p><p>同时由于 Cookie 通常用来作为用户标记，所以也成为前端安全领域的重要一块。</p><p><em>在有了 Cookie 以后，后续又出现了 同源策略（SOP） 来加强 Cookie 的安全，之后又出现了 CORS 和 CSP 这些关于资源访问权限的配置规范。同时，大量的以盗用 Cookie 为目标的 XSS、CSRF 攻击也出现了。</em></p><hr><h1 id="通常作用" tabindex="-1"><a class="header-anchor" href="#通常作用" aria-hidden="true">#</a> 通常作用</h1><p>它的核心是告诉服务端，这个请求是来自于哪个浏览器。</p><p>包括它的实际落地场景：</p><ul><li>会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）</li><li>个性化设置（如用户自定义设置、主题等）</li><li>浏览器行为跟踪（如跟踪分析用户行为等）</li></ul><p>它的本质都是通过 Cookie 告诉了服务器「我是谁」</p><hr><h1 id="创建-cookie" tabindex="-1"><a class="header-anchor" href="#创建-cookie" aria-hidden="true">#</a> 创建 Cookie</h1><p>通过服务器在 HTTP Response Header 中设置对应的字段来实现，比如在B站的页面中：</p><p><img src="assets/Untitled.17410f47.png" alt="Untitled"></p><p>在未登录的状态下，服务端设置向浏览器设置了一个「sid」的cookie</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>set-cookie: sid=c13krggs; Path=/; Domain=bilibili.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><aside> 👨🏻‍💻 它没有设置过期时间，且这个请求没有有效的 response body。可以猜测这个 sid 是用来追踪未登录用户的行为。 </aside><p>之后再看后续的请求，就会发现这个 Cookie 已经被带上</p><h1 id="属性" tabindex="-1"><a class="header-anchor" href="#属性" aria-hidden="true">#</a> 属性</h1><p>标准文档</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie" target="_blank" rel="noopener noreferrer">Set-Cookie - HTTP | MDN<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Expires=&lt;date&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Max-Age=&lt;non-zero-digit&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Path=&lt;path-value&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Secure
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; HttpOnly
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最简单的设置方法是</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 这样设置的是一个临时 cookie，存储在内存中，浏览器关闭以后 cookie 就会失效</span>
set<span class="token operator">-</span>cookie<span class="token operator">:</span> sid<span class="token operator">=</span><span class="token number">1234</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="有效期-expires-max-age" tabindex="-1"><a class="header-anchor" href="#有效期-expires-max-age" aria-hidden="true">#</a> 有效期 Expires/Max-Age</h2><p>设置 Cookie 的 Expires 属性，会使得：</p><ol><li>cookie 变成持久 cookie，它不会随着浏览器关闭而失效</li><li>cookie 到指定的过期时间后会失效</li></ol><p><s>而设置 max-age 不会使 cookie 持久化，但是有时效限制的功能。</s></p><p>实测发现，如果只设置 cookie 的 max-age，其实也会被浏览器转化为 expires 属性存储。</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 这样设置的是一个持久 cookie，能够一直生效到指定时间</span>
set<span class="token operator">-</span>cookie<span class="token operator">:</span> sid<span class="token operator">=</span><span class="token number">1234</span><span class="token punctuation">;</span>expires<span class="token operator">=</span>Wed<span class="token punctuation">,</span> <span class="token number">21</span> Oct <span class="token number">2020</span> <span class="token number">07</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">00</span> <span class="token constant">GMT</span><span class="token punctuation">;</span> <span class="token comment">// HTTP Date 规范</span>
set<span class="token operator">-</span>cookie<span class="token operator">:</span> sid<span class="token operator">=</span><span class="token number">1234</span><span class="token punctuation">;</span>max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">;</span>  <span class="token comment">// 单位为秒</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>expire 的内容应该符合 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Date" target="_blank" rel="noopener noreferrer">HTTP Date 规范<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，js 里面可以通过 <code>Date.prototype.toUTCString()</code> 获得</li><li>当 max-age 和 expire 同时存在时，以 max-age 为准。</li></ul><aside> 👨🏻‍💻 相关实验： <p><a href="https://www.notion.so/Cookie-expires-max-age-92917929d5f2461696ab3211e06c070a" target="_blank" rel="noopener noreferrer">Cookie expires 和 max-age 实验<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></aside><h2 id="作用域-domain-path" tabindex="-1"><a class="header-anchor" href="#作用域-domain-path" aria-hidden="true">#</a> 作用域 Domain/Path</h2><p><code>Domain</code> 和 <code>Path</code> 标识定义了Cookie的*作用域：*即允许 Cookie 发送给哪些URL。</p><h3 id="domain" tabindex="-1"><a class="header-anchor" href="#domain" aria-hidden="true">#</a> Domain</h3><p><code>Domain</code> 指定了哪些域名会带上 Cookie。</p><p>如果不指定，浏览器会默认将其设为当前 URL 的一级域名，比如<code>[www.example.com](http://www.example.com/)</code>会设为<code>[example.com](http://example.com/)</code>，而且以后如果访问<code>[example.com](http://example.com/)</code>的任何子域名，HTTP 请求也会带上这个 Cookie。</p><p>如果指定了<code>Domain</code>，则一般包含子域名。</p><p>通常我们通过设置 Domain 来让一段 Cookie 在同站点共享（登录态）</p><blockquote><p>大多数浏览器都遵循 RFC 规范，设置 Domain 时不需要加前导的点。 Domain=.azi.com 和 Domain=azi.com 作用一致。</p></blockquote><h3 id="path" tabindex="-1"><a class="header-anchor" href="#path" aria-hidden="true">#</a> Path</h3><p>指定了主机下的哪些路径可以接受 Cookie（该 URL 路径必须存在于请求 URL 中）。</p><p>在 Domain 满足的情况下，<code>Path</code>属性是 HTTP 请求路径的开头一部分，就会在头信息里面带上这个 Cookie。</p><p>以字符 <code>%x2F</code>(&quot;/&quot;) 作为路径分隔符，子路径也会被匹配。</p><aside> ❓ **这里想到一个问题是：如果 Domain 和 Path 随意写会怎么样？** 实测发现，如果向其他域名写 cookie，浏览器会拦截： <p><img src="assets/Untitled1.2cac1f37.png" alt="Untitled"></p><p>而对 Path 则无限制：</p><p><img src="assets/Untitled2.ae116443.png" alt="Untitled"></p></aside><h2 id="samesite" tabindex="-1"><a class="header-anchor" href="#samesite" aria-hidden="true">#</a> SameSite</h2><p>决定了请求跨站点时能否携带 Cookie</p><p>它可以用来阻止 CSRF 攻击</p><p>有三个值：</p><ol><li><code>None</code> 浏览器会在同站请求、跨站请求下继续发送 cookies。</li><li><code>Strict</code> 浏览器将只在访问相同站点时发送 cookie。 「相同站点」参考 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Site" target="_blank" rel="noopener noreferrer">Site<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 的定义。</li></ol><aside> 💡 SameSite 和 Same-Origin 的区别？ Same-Origin 的定义很明确：协议、域名、端口都一致的就是 Same-Origin; SameSite 则宽泛一些，它不要求协议，也不要求端口，只需要根域名一致就认为是 SameSite。 当然这里的根域名需要是「可注册的」，参看原文： `a site is determined by the ***registrable domain***  portion of the domain name.` 什么叫可注册的？ `.com` `.edu.com` 就不叫，而 `[github.com](http://github.com)` `[bilibili.com](http://bilibili.com)` 就算。 </aside><ol><li><p><code>Lax</code> 与 <strong><code>Strict</code></strong>  类似，大多数情况也是不发送第三方 Cookie，但是导航到目标网址的 Get 请求除外。 在新版本浏览器中，为默认选项。</p><table><thead><tr><th>请求类型</th><th>示例</th><th>None</th><th>Lax</th></tr></thead><tbody><tr><td>链接</td><td><code>&lt;a href=&quot;...&quot;&gt;&lt;/a&gt;</code></td><td>发送 Cookie</td><td>发送 Cookie</td></tr><tr><td>预加载</td><td><code>&lt;link rel=&quot;prerender&quot; href=&quot;...&quot;/&gt;</code></td><td>发送 Cookie</td><td>发送 Cookie</td></tr><tr><td>GET 表单</td><td><code>&lt;form method=&quot;GET&quot; action=&quot;...&quot;&gt;</code></td><td>发送 Cookie</td><td>发送 Cookie</td></tr><tr><td>POST 表单</td><td><code>&lt;form method=&quot;POST&quot; action=&quot;...&quot;&gt;</code></td><td>发送 Cookie</td><td>不发送</td></tr><tr><td>iframe</td><td><code>&lt;iframe src=&quot;...&quot;&gt;&lt;/iframe&gt;</code></td><td>发送 Cookie</td><td>不发送</td></tr><tr><td>AJAX</td><td><code>$.get(&quot;...&quot;)</code></td><td>发送 Cookie</td><td>不发送</td></tr><tr><td>Image</td><td><code>&lt;img src=&quot;...&quot;&gt;</code></td><td>发送 Cookie</td><td>不发送</td></tr></tbody></table></li></ol><aside> ❓ 为什么默认是 `Lax` 而非 `Strict` ? Strict 最为严格，完全禁止第三方 Cookie，但是会造成比较差的用户体验： 比如，当前网页有一个 GitHub 链接，用户点击跳转就不会带有 GitHub 的 Cookie，跳转过去总是未登陆状态。（**referer** 是原站点，导致 Github cookie 没带上） <p><a href="https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html" target="_blank" rel="noopener noreferrer"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></aside><h2 id="限制访问-secure-httponly" tabindex="-1"><a class="header-anchor" href="#限制访问-secure-httponly" aria-hidden="true">#</a> 限制访问 Secure/HttpOnly</h2><h3 id="secure" tabindex="-1"><a class="header-anchor" href="#secure" aria-hidden="true">#</a> Secure</h3><p>标记为 <code>Secure</code> 的 Cookie 只应通过被 HTTPS 协议加密过的请求发送给服务端，因此可以预防 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/MitM" target="_blank" rel="noopener noreferrer">man-in-the-middle<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 攻击者的攻击。</p><p>如果通信是 HTTPS 协议，该开关自动打开。</p><h3 id="httponly" tabindex="-1"><a class="header-anchor" href="#httponly" aria-hidden="true">#</a> HttpOnly</h3><p>标记为 <code>Secure</code> 的 Cookie 会使得JavaScript <code>[Document.cookie](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie)</code> API 无法访问带有 <code>HttpOnly</code> 属性的cookie；此类 Cookie 仅作用于服务器。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="cookie-的修改" tabindex="-1"><a class="header-anchor" href="#cookie-的修改" aria-hidden="true">#</a> Cookie 的修改</h1><p>如果服务器想改变一个早先设置的 Cookie，必须同时满足四个条件：Cookie 的<code>key</code>、<code>domain</code>、<code>path</code>和<code>secure</code>都匹配。举例来说，如果原始的 Cookie 是用如下的<code>Set-Cookie</code>设置的。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>**Set-Cookie: key1=value1; domain=example.com; path=/blog**
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>改变上面这个 Cookie 的值，就必须使用同样的<code>Set-Cookie</code>。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>**Set-Cookie: key1=value2; domain=example.com; path=/blog**
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>只要有一个属性不同，就会生成一个全新的 Cookie，而不是替换掉原来那个 Cookie。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>**Set-Cookie: key1=value2; domain=example.com; path=/**
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>上面的命令设置了一个全新的同名 Cookie，但是<code>path</code>属性不一样。下一次访问<code>[example.com/blog](http://example.com/blog)</code>的时候，浏览器将向服务器发送两个同名的 Cookie。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="assets/app.47e28445.js" defer></script>
  </body>
</html>
